start: select | count

count: "how many" _row_word ("are in" | "in") table_name conditions*
|"how many" _row_word "does" table_name "have" conditions*

select: "-"
| _source_statement _source_first [order]
| _request_statement _request_first [order]
| conditions* conditions_first [order]
| selected_columns*  _request_statement _source_statement conditions* [order]

_request_first: "-"
| _source_statement selected_columns* conditions*
| _source_statement conditions* selected_columns*
| selected_columns* conditions* _source_statement
| selected_columns* _source_statement conditions* 
| conditions* _source_statement selected_columns*
| conditions* selected_columns* _source_statement 

_source_first: "-"
| _request_statement selected_columns* conditions*
| _request_statement conditions* selected_columns* 
| selected_columns*  _request_statement conditions*

conditions_first: "-"
| _request_statement _source_statement selected_columns* 


//order
order: _order_statement _data [direction]
_order_statement: ("ordered by" | "order by" | "organize by") ["column"]
direction: "ascending" -> asc | "descending" -> desc


//request statement
_request_statement: _verb_statement [row_limit] _row_word
_row_word: "row"["s"] | "entry" | "entries" | "data" | "item"["s"] 
| "thing"["s"] | "stuff" 
_verb_statement: "give me" | "return" | "fetch" | "i want" | "get"
row_limit: NUMBER

//selected columns
selected_columns: ("with"|"with the") ("column"|"columns") _data [_and_statement _data]*


//source
_source_statement: _from_statement table_name | "from the" table_name "table" 
_from_statement: "from the" | "from" | "from the table" | "in"
table_name: WORD

//condition
conditions: _where_statement conditional [_and_statement conditional]+
_where_statement: "wherin" | "where" | "that has" | "when"
_and_statement: "also" | "and" | "and also" | "additionally" 
?conditional: equality | greater

//conditons
equality: _data _equal_word _data
_equal_word: "is" | "is equal to" | "is the same as"

greater: _data _greater_word _data
_greater_word: "is greater than" | "is more than" | "is larger than"

less: _data _less_word _data
_less_word: "is less than" | "is smaller than"

_data: WORD | NUMBER
%import common.WORD  
%import common.NUMBER 
%ignore " "             